(this.webpackJsonpspotibike=this.webpackJsonpspotibike||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(4),i=n(0),a=n.n(i),r=n(12),s=n.n(r),l=(n(72),n(73),{expiresAt:null,isAuth:!1,api:null,userID:null}),u=i.createContext(l),o=n(24);function j(){var e=Object(i.useContext)(u).isAuth;return Object(c.jsx)("div",{children:Object(c.jsx)("header",{className:"Splash-header",children:Object(c.jsx)(o.b,{to:"/setup",children:e?"Continue":"Login"})})})}var b=n(11),d=n(110),h=n(121),O=n(123),f=n(113),x=Object(d.a)({root:{padding:32},buttons:{padding:64},button:{marginLeft:12,marginRight:12},link:{textDecoration:"none"}}),p=function(){};function m(){var e=Object(i.useState)([60,120]),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(i.useContext)(u).isAuth,s=x(),l=Object(i.useCallback)((function(e){return{pathname:"/songs",search:"?use_user_artists=".concat(e,"&min_bpm=").concat(n[0],"&max_bpm=").concat(n[1])}}),[n]);return r?Object(c.jsxs)(h.a,{display:"flex",flexDirection:"column",className:s.root,children:[Object(c.jsx)("div",{children:"Recommended BPM: ~90"}),Object(c.jsxs)("div",{children:["Selected BPM: ",n[0]," - ",n[1]]}),Object(c.jsx)(O.a,{value:n,onChange:function(e,t){a(t)},valueLabelDisplay:"on","aria-labelledby":"range-slider",step:1,min:30,max:150}),Object(c.jsx)(h.a,{display:"flex",flexDirection:"row",className:s.buttons,justifyContent:"space-around",children:Object(c.jsx)(f.a,{variant:"contained",color:"primary",onClick:p,className:s.button,children:Object(c.jsx)(o.b,{to:l(!0),style:{textDecoration:"none",color:"white"},children:"Make Playlist from Your Artists/Albums"})})})]}):Object(c.jsx)(c.Fragment,{})}var g=n(13),v=n(120),y=n(114),k=n(115),C=n(116),S=n(117),_=n(118),w=n(122),P=n(119),A=Object(d.a)({root:{padding:32},table:{minWidth:750},button:{marginLeft:12,marginRight:12}});function D(){var e,t,n=Object(i.useState)([]),a=Object(b.a)(n,2),r=a[0],s=a[1],l=Object(i.useState)(""),o=Object(b.a)(l,2),j=o[0],d=o[1],O=Object(i.useContext)(u),x=O.isAuth,p=O.api,m=O.userID,D=A(),N=Object(g.f)(),F=new URLSearchParams(window.location.search),L=(F.get("use_user_artists"),+(null!==(e=F.get("min_bpm"))&&void 0!==e?e:"0")),M=+(null!==(t=F.get("max_bpm"))&&void 0!==t?t:"0"),R=function(){var e=Object(i.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(i.useRef)(n),r=Object(i.useContext)(u).api,s=Object(i.useCallback)((function(){var e;r.getMySavedTracks({limit:50,offset:null!==(e=a.current.length)&&void 0!==e?e:0}).then((function(e){c(e.items.map((function(e){return e.track})))}))}),[r]),l=Object(i.useRef)(s);return Object(i.useEffect)((function(){0===n.length&&l.current()}),[n]),[n,l.current]}(),T=function(e,t,n){var c=Object(i.useState)([]),a=Object(b.a)(c,2),r=a[0],s=a[1],l=Object(i.useContext)(u).api,o=Object(i.useCallback)((function(){var c=e.map((function(e){return e.id}));l.getAudioFeaturesForTracks(c).then((function(c){var i=c.audio_features.filter((function(e){if(null==e)return!1;var c=e.tempo;return c>=t&&c<=n})).map((function(e){return e.id})),a=e.filter((function(e){return i.includes(e.id)}));s(a)}))}),[l,e,t,n]);return Object(i.useEffect)((function(){o()}),[e.length]),r}(Object(b.a)(R,1)[0],L,M);if(!x)return Object(c.jsx)(c.Fragment,{});var E=""===j.trim()||r.length<1;return Object(c.jsxs)(h.a,{display:"flex",flexDirection:"column",className:D.root,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"Song Select"}),Object(c.jsxs)("div",{children:["Enter Playlist Name:"," ",Object(c.jsx)(v.a,{label:"Playlist Name",variant:"filled",value:j,onChange:function(e){return d(e.target.value)}}),Object(c.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){E||p.createPlaylist(m,{name:j,public:!1,description:"".concat(L," to ").concat(M," BPM playlist - Made with Spotibike")}).then((function(e){var t=r.map((function(e){return e.uri}));p.addTracksToPlaylist(e.id,t).then((function(){N.push("/success/".concat(e.id))}))}))},className:D.button,disabled:E,children:"Create Playlist"})]})]}),Object(c.jsx)(y.a,{children:Object(c.jsxs)(k.a,{className:D.table,size:"medium",children:[Object(c.jsx)(C.a,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(_.a,{padding:"checkbox",children:Object(c.jsx)(w.a,{onChange:function(){if(0===r.length){var e=T.map((function(e){return{id:e.id,uri:e.uri}}));s(e)}else s([])},indeterminate:r.length>0&&r.length<T.length,checked:r.length>0})}),Object(c.jsx)(_.a,{children:"Track Name"}),Object(c.jsx)(_.a,{children:"Artist(s)"}),Object(c.jsx)(_.a,{children:"Album"})]})}),Object(c.jsx)(P.a,{children:T.map((function(e){var t=r.map((function(e){return e.id})).includes(e.id);return Object(c.jsxs)(S.a,{hover:!0,role:"checkbox",onClick:function(){return function(e,t){var n=r.map((function(e){return e.id})).indexOf(e),c=[];-1===n?c=c.concat(r,{id:e,uri:t}):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=r.concat(r.slice(0,n),r.slice(n+1))),s(c)}(e.id,e.uri)},children:[Object(c.jsx)(_.a,{padding:"checkbox",children:Object(c.jsx)(w.a,{checked:t})}),Object(c.jsx)(_.a,{children:e.name}),Object(c.jsx)(_.a,{children:e.artists.map((function(e){return e.name})).join(", ")}),Object(c.jsx)(_.a,{children:e.album.name})]},e.id)}))})]})})]})}function N(){var e,t=Object(i.useContext)(u).isAuth,n=function(e){var t=Object(i.useContext)(u).api,n=Object(i.useState)(null),c=Object(b.a)(n,2),a=c[0],r=c[1];return t.getPlaylist(e).then((function(e){var t=e.external_urls,n=e.images;r({external_urls:t,images:n})})),a}(Object(g.g)().playlistid);return t?Object(c.jsxs)("div",{children:["Playlist Created:"," ",Object(c.jsx)("a",{href:null===n||void 0===n?void 0:n.external_urls.spotify,children:null!==(e=null===n||void 0===n?void 0:n.external_urls.spotify)&&void 0!==e?e:"Loading Details..."})]}):Object(c.jsx)(c.Fragment,{})}var F=n(55),L=["playlist-read-private","playlist-modify-private","user-library-read"];function M(e){return Object(i.useContext)(u).isAuth||(window.location.href=encodeURI("".concat("https://accounts.spotify.com/authorize","?client_id=").concat("6fd3ee11d3a146ffad18854c9762964c","&response_type=token&redirect_uri=").concat("https://rageandqq.github.io/spotibike/","&scope=").concat(L.join(" "),"&show_dialog=").concat(!1))),Object(c.jsx)(g.a,Object(F.a)({},e))}var R=n(56);function T(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e}),[e]),t.current}var E=new(n.n(R).a);function I(e){var t=e.children,n=Object(i.useState)(null),a=Object(b.a)(n,2),r=a[0],s=a[1],l=new URLSearchParams(window.location.hash.substr(1)),o=l.get("access_token"),j=l.get("exipres_in"),d=Object(i.useState)(o),h=Object(b.a)(d,2),O=h[0],f=h[1],x=Object(i.useState)(null!=j?+j:null),p=Object(b.a)(x,2),m=p[0],g=p[1],v=Object(i.useCallback)((function(e){E.setAccessToken(e),E.getMe().then((function(e){s(e.id)}))}),[]),y=T(o),k=T(j);Object(i.useEffect)((function(){null!=o&&y!==o&&(f(o),v(o)),null!=j&&k!==j&&g((new Date).getTime()+ +j)}),[y,o,k,j,v]);var C=Object(i.useMemo)((function(){return{expiresAt:m,isAuth:null!=O,api:E,userID:r}}),[O,m,r]);return Object(c.jsx)(u.Provider,{value:C,children:t})}var B=function(){return Object(c.jsx)(o.a,{children:Object(c.jsx)(I,{children:Object(c.jsxs)(g.c,{children:[Object(c.jsx)(M,{path:"/success/:playlistid",children:Object(c.jsx)(N,{})}),Object(c.jsx)(M,{path:"/songs",children:Object(c.jsx)(D,{})}),Object(c.jsx)(M,{path:"/setup",children:Object(c.jsx)(m,{})}),Object(c.jsx)(g.a,{path:"/",children:Object(c.jsx)(j,{})})]})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};n(79).config(),s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(B,{})}),document.getElementById("root")),U()}},[[82,1,2]]]);
//# sourceMappingURL=main.6ef46f32.chunk.js.map
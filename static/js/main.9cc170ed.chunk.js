(this.webpackJsonpspotibike=this.webpackJsonpspotibike||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(3),i=n(0),a=n.n(i),r=n(12),s=n.n(r),l=(n(72),n(73),{expiresAt:null,isAuth:!1,api:null,userID:null}),o=i.createContext(l),u=n(19);function j(){var e=Object(i.useContext)(o).isAuth;return Object(c.jsx)("div",{children:Object(c.jsx)("header",{className:"Splash-header",children:Object(c.jsx)(u.b,{to:"/spotibike/setup",children:e?"Continue":"Login"})})})}var b=n(10),d=n(110),h=n(121),O=n(112),x=n(114),f=n(115),m=n(116),p=n(117),g=n(118),v=n(123),k=n(119),y=Object(d.a)({root:{padding:32},buttons:{padding:64},button:{marginLeft:12,marginRight:12},link:{textDecoration:"none"},table:{maxWidth:500,marginBottom:40}}),C=function(){};function P(){var e=Object(i.useState)([60,120]),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(i.useContext)(o).isAuth,s=y(),l=Object(i.useCallback)((function(e){return{pathname:"/spotibike/songs",search:"?use_user_artists=".concat(e,"&min_bpm=").concat(n[0],"&max_bpm=").concat(n[1])}}),[n]);return r?Object(c.jsxs)(h.a,{display:"flex",flexDirection:"column",className:s.root,children:[Object(c.jsx)(O.a,{children:Object(c.jsxs)(x.a,{size:"medium",className:s.table,children:[Object(c.jsx)(f.a,{children:Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{children:"Biking Type"}),Object(c.jsx)(p.a,{children:"Recommended BPM Range"})]})}),Object(c.jsxs)(g.a,{children:[Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{children:"Recovery"}),Object(c.jsx)(p.a,{children:"~100-110 BPM"})]}),Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{children:"Intervals"}),Object(c.jsx)(p.a,{children:"~160+ BPM"})]}),Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{children:"Tempo"}),Object(c.jsx)(p.a,{children:"~140-150 BPM"})]}),Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{children:"Endurance"}),Object(c.jsx)(p.a,{children:"~120-130 BPM"})]})]})]})}),Object(c.jsxs)("div",{children:["Selected BPM: ",n[0]," - ",n[1]]}),Object(c.jsx)(v.a,{value:n,onChange:function(e,t){a(t)},valueLabelDisplay:"on","aria-labelledby":"range-slider",step:1,min:50,max:220}),Object(c.jsxs)(h.a,{display:"flex",flexDirection:"row",className:s.buttons,justifyContent:"space-around",children:[Object(c.jsx)(k.a,{variant:"contained",color:"primary",onClick:C,className:s.button,children:Object(c.jsx)(u.b,{to:l(!0),style:{textDecoration:"none",color:"white"},children:"Make Playlist from Your Artists/Albums"})}),Object(c.jsx)(k.a,{variant:"contained",onClick:C,className:s.button,children:Object(c.jsx)(u.b,{to:l(!1),style:{textDecoration:"none",color:"black"},children:"Make Playlist from Random Top Music"})})]})]}):Object(c.jsx)(c.Fragment,{})}var S=n(13);var _=n(120),w=n(122),D=Object(d.a)({root:{padding:32},table:{minWidth:750},button:{marginLeft:12,marginRight:12}});function M(){var e,t,n=Object(i.useState)([]),a=Object(b.a)(n,2),r=a[0],s=a[1],l=Object(i.useState)(""),u=Object(b.a)(l,2),j=u[0],d=u[1],v=Object(i.useContext)(o),y=v.isAuth,C=v.api,P=v.userID,M=D(),A=Object(S.f)(),N=new URLSearchParams(window.location.search),R="true"===N.get("use_user_artists"),T=+(null!==(e=N.get("min_bpm"))&&void 0!==e?e:"0"),B=+(null!==(t=N.get("max_bpm"))&&void 0!==t?t:"0"),F=function(){var e=Object(i.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(i.useRef)(n),r=Object(i.useContext)(o).api,s=Object(i.useCallback)((function(){var e;r.getMySavedTracks({limit:50,offset:null!==(e=a.current.length)&&void 0!==e?e:0}).then((function(e){c(e.items.map((function(e){return e.track})))}))}),[r]),l=Object(i.useRef)(s);return Object(i.useEffect)((function(){0===n.length&&l.current()}),[n]),[n,l.current]}(),L=Object(b.a)(F,1)[0],E=function(){var e=Object(i.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(i.useContext)(o).api,r=Object(i.useCallback)((function(){a.getPlaylistTracks("37i9dQZEVXbMDoHDwVN2tF").then((function(e){var t=e.items.map((function(e){return e.track}));c(t)}))}),[a]),s=Object(i.useRef)(r);return Object(i.useEffect)((function(){0===n.length&&s.current()}),[n]),[n,s.current]}(),I=Object(b.a)(E,1)[0],z=function(e,t,n){var c=Object(i.useState)([]),a=Object(b.a)(c,2),r=a[0],s=a[1],l=Object(i.useContext)(o).api,u=Object(i.useCallback)((function(){var c=e.map((function(e){return e.id}));l.getAudioFeaturesForTracks(c).then((function(c){var i=c.audio_features.filter((function(e){if(null==e)return!1;var c=e.tempo;return c>=t&&c<=n})).map((function(e){return e.id})),a=e.filter((function(e){return i.includes(e.id)}));s(a)}))}),[l,e,t,n]);return Object(i.useEffect)((function(){u()}),[e.length]),r}(R?L:I,T,B);if(!y)return Object(c.jsx)(c.Fragment,{});var U=""===j.trim()||r.length<1;return Object(c.jsxs)(h.a,{display:"flex",flexDirection:"column",className:M.root,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"Song Select"}),Object(c.jsxs)("div",{children:["Enter Playlist Name:"," ",Object(c.jsx)(_.a,{label:"Playlist Name",variant:"filled",value:j,onChange:function(e){return d(e.target.value)}}),Object(c.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){U||C.createPlaylist(P,{name:j,public:!1,description:"".concat(T," to ").concat(B," BPM playlist - Made with Spotibike")}).then((function(e){var t=r.map((function(e){return e.uri}));C.addTracksToPlaylist(e.id,t).then((function(){A.push("/spotibike/success/".concat(e.id))}))}))},className:M.button,disabled:U,children:"Create Playlist"})]})]}),Object(c.jsx)(O.a,{children:Object(c.jsxs)(x.a,{className:M.table,size:"medium",children:[Object(c.jsx)(f.a,{children:Object(c.jsxs)(m.a,{children:[Object(c.jsx)(p.a,{padding:"checkbox",children:Object(c.jsx)(w.a,{onChange:function(){if(0===r.length){var e=z.map((function(e){return{id:e.id,uri:e.uri}}));s(e)}else s([])},indeterminate:r.length>0&&r.length<z.length,checked:r.length>0})}),Object(c.jsx)(p.a,{children:"Track Name"}),Object(c.jsx)(p.a,{children:"Artist(s)"}),Object(c.jsx)(p.a,{children:"Album"})]})}),Object(c.jsx)(g.a,{children:z.map((function(e){var t=r.map((function(e){return e.id})).includes(e.id);return Object(c.jsxs)(m.a,{hover:!0,role:"checkbox",onClick:function(){return function(e,t){var n=r.map((function(e){return e.id})).indexOf(e),c=[];-1===n?c=c.concat(r,{id:e,uri:t}):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=r.concat(r.slice(0,n),r.slice(n+1))),s(c)}(e.id,e.uri)},children:[Object(c.jsx)(p.a,{padding:"checkbox",children:Object(c.jsx)(w.a,{checked:t})}),Object(c.jsx)(p.a,{children:e.name}),Object(c.jsx)(p.a,{children:e.artists.map((function(e){return e.name})).join(", ")}),Object(c.jsx)(p.a,{children:e.album.name})]},e.id)}))})]})})]})}var A=Object(d.a)({root:{padding:32},buttons:{padding:64},button:{marginLeft:12,marginRight:12},link:{textDecoration:"none"},table:{maxWidth:500,marginBottom:40}});var N=function(){};function R(){var e,t=Object(i.useContext)(o).isAuth,n=function(e){var t=Object(i.useContext)(o).api,n=Object(i.useState)(null),c=Object(b.a)(n,2),a=c[0],r=c[1];return t.getPlaylist(e).then((function(e){var t=e.external_urls,n=e.images;r({external_urls:t,images:n})})),a}(Object(S.g)().playlistid),a=A();return t?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:["Playlist Created:"," ",Object(c.jsx)("a",{href:null===n||void 0===n?void 0:n.external_urls.spotify,children:null!==(e=null===n||void 0===n?void 0:n.external_urls.spotify)&&void 0!==e?e:"Loading Details..."})]}),Object(c.jsx)(k.a,{variant:"contained",color:"primary",onClick:N,className:a.button,children:Object(c.jsx)(u.b,{to:"/spotibike/setup",style:{textDecoration:"none",color:"white"},children:"Make Another"})})]}):Object(c.jsx)(c.Fragment,{})}var T=n(56),B=["playlist-read-private","playlist-modify-private","user-library-read"];function F(e){return Object(i.useContext)(o).isAuth||(window.location.href=encodeURI("".concat("https://accounts.spotify.com/authorize","?client_id=").concat("6fd3ee11d3a146ffad18854c9762964c","&response_type=token&redirect_uri=").concat("https://rageandqq.github.io/spotibike/","&scope=").concat(B.join(" "),"&show_dialog=").concat(!1))),Object(c.jsx)(S.a,Object(T.a)({},e))}var L=n(57);function E(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e}),[e]),t.current}var I=new(n.n(L).a);function z(e){var t=e.children,n=Object(i.useState)(null),a=Object(b.a)(n,2),r=a[0],s=a[1],l=new URLSearchParams(window.location.hash.substr(1)),u=l.get("access_token"),j=l.get("exipres_in"),d=Object(i.useState)(u),h=Object(b.a)(d,2),O=h[0],x=h[1],f=Object(i.useState)(null!=j?+j:null),m=Object(b.a)(f,2),p=m[0],g=m[1],v=Object(i.useCallback)((function(e){I.setAccessToken(e),I.getMe().then((function(e){s(e.id)}))}),[]),k=E(u),y=E(j);Object(i.useEffect)((function(){null!=u&&k!==u&&(x(u),v(u)),null!=j&&y!==j&&g((new Date).getTime()+ +j)}),[k,u,y,j,v]);var C=Object(i.useMemo)((function(){return{expiresAt:p,isAuth:null!=O,api:I,userID:r}}),[O,p,r]);return Object(c.jsx)(o.Provider,{value:C,children:t})}var U=function(){return Object(c.jsx)(u.a,{children:Object(c.jsx)(z,{children:Object(c.jsxs)(S.c,{children:[Object(c.jsx)(F,{path:"/spotibike/success/:playlistid",children:Object(c.jsx)(R,{})}),Object(c.jsx)(F,{path:"/spotibike/songs",children:Object(c.jsx)(M,{})}),Object(c.jsx)(F,{path:"/spotibike/setup",children:Object(c.jsx)(P,{})}),Object(c.jsx)(S.a,{path:"/spotibike/",children:Object(c.jsx)(j,{})})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};n(79).config(),s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(U,{})}),document.getElementById("root")),W()}},[[82,1,2]]]);
//# sourceMappingURL=main.9cc170ed.chunk.js.map